<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>æŠ½ç±¤é¤å»³ç³»çµ±</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    text-align: center;
    padding: 20px;
  }
  #container {
    max-width: 500px;
    background: #fff;
    margin: auto;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .option-group {
    text-align: left;
    margin-bottom: 15px;
  }
  button {
    width: 90%;
    padding: 15px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    background: #4CAF50;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background: #45a049;
  }
  img {
    width: 100%;
    margin-top: 10px;
    border-radius: 10px;
  }
</style>
</head>

<body>

<div id="container">
  <h2>ğŸ½ï¸ é¤å»³éš¨æ©ŸæŠ½ç±¤</h2>

  <!-- å¤šé¸åˆ†é¡ -->
  <div class="option-group">
    <label><input type="checkbox" id="chk_pickup" checked> è‡ªå–</label><br>
    <label><input type="checkbox" id="chk_delivery" checked> å¤–é€</label>
  </div>

  <button onclick="drawRestaurant()">æŠ½ é¤ å»³ï¼</button>

  <div id="result" style="margin-top:20px;"></div>
</div>

<script>
let restaurants = {};

// è¼‰å…¥ JSONï¼ˆè‡ªå– / å¤–é€ åˆ†é¡ï¼‰
fetch("restaurants.json")
  .then(res => res.json())
  .then(data => restaurants = data);

// æŠ½ç±¤ä¸»ç¨‹å¼
function drawRestaurant() {
  const wantPickup = document.getElementById("chk_pickup").checked;
  const wantDelivery = document.getElementById("chk_delivery").checked;

  // é¤å»³æ± 
  let pool = [];

  if (wantPickup && restaurants["è‡ªå–"]) {
    pool = pool.concat(restaurants["è‡ªå–"]);
  }
  if (wantDelivery && restaurants["å¤–é€"]) {
    pool = pool.concat(restaurants["å¤–é€"]);
  }

  if (pool.length === 0) {
    document.getElementById("result").innerHTML = "<p>âš ï¸ è«‹è‡³å°‘é¸æ“‡ä¸€ç¨®å–é¤æ–¹å¼ï¼</p>";
    return;
  }

  // éš¨æ©ŸæŠ½å–
  const r = pool[Math.floor(Math.random() * pool.length)];

  // Google Map å°èˆª
  const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.address)}`;

  // é¡¯ç¤ºçµæœ
  document.getElementById("result").innerHTML = `
    <h3>${r.name}</h3>
    <p><strong>å–é¤æ–¹å¼ï¼š</strong>${getType(r)}</p>
    <p><strong>ğŸ“ åœ°å€ï¼š</strong>
      <a href="${mapLink}" target="_blank">${r.address}</a>
    </p>
    <p><strong>ğŸ“ é›»è©±ï¼š</strong>
      <a href="tel:${r.phone}">${r.phone}</a>
    </p>
    <img src="menu/${r.menuImage}" alt="menu">
  `;
}

// åˆ¤æ–·é¤å»³å±¬æ–¼å“ªå€‹åˆ†é¡ï¼ˆè‡ªå– / å¤–é€ï¼‰
function getType(item) {
  if (restaurants["å¤–é€"] && restaurants["å¤–é€"].includes(item)) return "å¤–é€";
  if (restaurants["è‡ªå–"] && restaurants["è‡ªå–"].includes(item)) return "è‡ªå–";
  return "æœªçŸ¥";
}
</script>

</body>
</html>